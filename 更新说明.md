
# 新增分支说明
## 新增feature-vue2.7-pc-cli

# 配置新增vite
## 配置新增vite配置中项目内容
### 配置alias
~~~
const path = require("path")
resolve: {
    alias: {
      "@": path.resolve(__dirname, "src"),
      "components": path.resolve(__dirname, "src/components"),
      "styles": path.resolve(__dirname, "src/styles"),
      "plugins": path.resolve(__dirname, "src/plugins"),
      "views": path.resolve(__dirname, "src/views"),
      "layouts": path.resolve(__dirname, "src/layouts"),
      "utils": path.resolve(__dirname, "src/utils"),
      "apis": path.resolve(__dirname, "src/apis"),
      "dirs": path.resolve(__dirname, "src/directives"),
    },
  },

~~~
### 配置extension
~~~

resolve: {
    extensions: ['.js', '.jsx', '.ts', '.tsx'],

}


~~~

### 配置ts的时候，类型找不到：增加安装包和shims-vue.d
~~~
npm i --save-dev @types/node

shims-vue.d.ts


~~~
## 取消tsconfig.js中的sourceMap生成配置


## 配置实时查看代码模块



## 配置sideEffects
优化webpack的打包的tree-shaking优化
~~~
webpack v4 开始新增了一个 sideEffects 特性，通过给 package.json 加入 sideEffects声明该 包/模块 是否包含 sideEffects(副作用)，从而可以为 tree-shaking 提供更大的优化空间。


  "sideEffects": [
    "@babel/polyfill"
  ],
所以其实 webpack 里的 sideEffects: false 的意思并不是我这个模块真的没有副作用，而只是为了在摇树时告诉 webpack：我这个包在设计的时候就是期望没有副作用的，即使他打完包后是有副作用的，webpack 同学你摇树时放心的当成无副作用包摇就好啦！。

也就是说，只要你的包不是用来做 polyfill 或 shim 之类的事情，就尽管放心的给他加上 sideEffects: false 吧！
~~~

## 增加ts运行时的声明库
~~~
npm i tslib

~~~

## 增加wp2vite加快解析
~~~
使用： wp2vite --config=./vue.config.js
生成一份vite.config.js配置，然后重新pnpm i后，可以看到正常化


~~~
### vite插件和vite版本不一致，出现vite.createFilter is not a function
升级vite版本最新对应vite插件版本

### 装好成功后，多了一个index.html文件，但是里面必须自己添加一下引用文件
~~~
<script type="module" src="/src/main.js"></script>

~~~
### 如果使用了request-context转换为
import.meta.glob

### 转换后，__dirname是undefined
### require.context到import.meta.globEager
const files = require.context('.', false, /\.ts$/);
转换后
const files = import.meta.globEager("./*.ts")

更加简洁。
## code代码自动跳转，配置codelink

~~~
shift+左键

~~~
